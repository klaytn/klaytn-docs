# v1.8.0

## 패키지 다운로드

### RPM <a id="rpm"></a>

Cypress 패키지
- [kcnd-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kcnd-v1.8.0-0.el7.x86_64.rpm)
- [kpnd-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kpnd-v1.8.0-0.el7.x86_64.rpm)
- [kend-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kend-v1.8.0-0.el7.x86_64.rpm)

Baobab 패키지
- [kcnd-baobab-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kcnd-baobab-v1.8.0-0.el7.x86_64.rpm)
- [kpnd-baobab-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kpnd-baobab-v1.8.0-0.el7.x86_64.rpm)
- [kend-baobab-Baobab-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kend-baobab-v1.8.0-0.el7.x86_64.rpm)

공통 패키지
- [kscnd-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kscnd-v1.8.0-0.el7.x86_64.rpm)
- [kspnD-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kspnd-v1.8.0-0.el7.x86_64.rpm)
- [ksend-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/ksend-v1.8.0-0.el7.x86_64.rpm)
- [kbnd-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kbnd-v1.8.0-0.el7.x86_64.rpm)
- [kgen-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/kgen-v1.8.0-0.el7.x86_64.rpm)
- [homi-v1.8.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.8.0/homi-v1.8.0-0.el7.x86_64.rpm)

### Linux <a id="linux"></a>

Cypress 패키지
- [kcn-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kcn-v1.8.0-0-linux-amd64.tar.gz)
- [kpn-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kpn-v1.8.0-0-linux-amd64.tar.gz)
- [ken-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/ken-v1.8.0-0-linux-amd64.tar.gz)

Baobab 패키지
- [kcn-baobab-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kcn-baobab-v1.8.0-0-linux-amd64.tar.gz)
- [kpn-baobab-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kpn-baobab-v1.8.0-0-linux-amd64.tar.gz)
- [ken-baobab-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/ken-baobab-v1.8.0-0-linux-amd64.tar.gz)

공통 패키지
- [kscn-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kscn-v1.8.0-0-linux-amd64.tar.gz)
- [kspn-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kspn-v1.8.0-0-linux-amd64.tar.gz)
- [ksen-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/ksen-v1.8.0-0-linux-amd64.tar.gz)
- [kbn-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kbn-v1.8.0-0-linux-amd64.tar.gz)
- [kgen-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kgen-v1.8.0-0-linux-amd64.tar.gz)
- [homi-v1.8.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/homi-v1.8.0-0-linux-amd64.tar.gz)

### MacOS <a id="macos"></a>

Cypress 패키지
- [kcn-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kcn-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kpn-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [ken-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/ken-v1.8.0-0-darwin-10.10-amd64.tar.gz)

Baobab 패키지
- [kcn-baobab-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kcn-baobab-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-baobab-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kpn-baobab-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [ken-baobab-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/ken-baobab-v1.8.0-0-darwin-10.10-amd64.tar.gz)

공통 패키지
- [kscn-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kscn-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [kspn-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kspn-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [ksen-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/ksen-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [kbn-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kbn-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [kgen-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/kgen-v1.8.0-0-darwin-10.10-amd64.tar.gz)
- [homi-v1.8.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.8.0/homi-v1.8.0-0-darwin-10.10-amd64.tar.gz)

### Windows <a id="windows"></a>

- 아직 지원되지 않음


## 릴리스 노트

Klaytn v1.8.0에는 이더리움 하드포크와 같은 호환되지 않는 변경을 초래하는 프로토콜 업그레이드가 포함되어 있습니다. 모든 노드는 목표 블록 번호 이전에 이 버전으로 업그레이드해야 합니다.


예정된 하드포크 일정은 다음과 같습니다:
- Baobab 테스트넷 (Baobab 블록 번호 86513895, 예정일: 3월 24일)
  - 이더리움 타입 하드포크: #86513895
   (Baobab에는 이미 IstanbulEVM 및 LondonEVM 하드포크가 적용되었습니다.)

- Cypress 메인넷(Cypress 블록 번호 86816005, 예정일: 3월 31일)
  - IstanbulEVM 하드포크: #86816005
  - LondonEVM 하드포크: #86816005
  - EthTxType 하드포크: #86816005

**참고: Istanbul EVM 하드포크에는 EVM Opcode에 대한 가스 비용과 API 사용 방법이 변경됩니다. 이러한 변경으로 인해 기존 컨트랙트가 예상대로 작동하지 않을 수 있으니, 이 문서의 [프로토콜 업데이트 시 주의사항] 섹션을 참고하시기 바랍니다.**

## 프로토콜 업그레이드 기능
 - EthereumTransactionType을 지원하기 위해 새로운 트랜잭션 유형을 가능하게 하는 EthTxType 하드포크가 도입되었습니다: `TxTypeEthereumAccessList` 및 `TxTypeEthereumDynamicFee` (#1142 #1158)

## v1.8.0의 새로운 기능
- `EthereumTxTypeEnvelope` 정의 (#1171)
- 새로운 트랜잭션 유형에 대한 EIP-2930 서명자 및 London 서명자 구현(#1142 #1158)
- 이더리움 API 형식을 지원하기 위해 `eth` 네임스페이스 API 도입 (#1076 #1077 #1083 #1088 #1093 #1095 #1121 #1123 #1124 #1127 #1129 #1130 #1134 #1172).
- 새로운 `klay` 네임스페이스 API를 추가했습니다: `klay_maxPriorityFeePerGas`, `klay_createAccessList`, `klay_feeHistory` (#1156).
- 이더리움 API 형식 호환성을 비활성화하는 `rpc.eth.noncompatible` 플래그 도입 (#1072)
- 블록 헤더 API 반환에 `baseFeePerGas` 필드 추가 (#1183)
- 상태 스냅샷 구현 (#1112 #1116 #1152 #1154 #1155 #1173 #1174)
- 충돌 내성을 위한 자동 재시작 데몬 구현 (#1101)

### 개선 사항
- 노드 시작 시 계정 관리자 잠금 해제 타이밍 조정 (#1141)
- 한 번의 투표로 여러 검증인을 추가/제거할 수 있도록 허용 (#1110)
- 거버넌스 투표 API의 검증 로직 개선 (#1109)
- 블록체인의 뮤텍스 통합 (#1099)

### 수정
- 거버넌스 캐시 초기화 버그 수정 (#1168)
- 적절한 가스 가격 값을 반환하도록 `klay_gasPrice` API 수정 (#1211)
- 트랜잭션 필드 업데이트로 인해 트리거되는 경쟁 조건 문제 수정 (#1091)
- 딥 리턴 객체로 인한 call tracer 패닉 수정 (#1203)

## ETC
- Cypress 네트워크의 하드포크 블록 번호 설정(#1230)
   - IstanbulEVM 하드포크: 86816005
   - LondonEVM 하드포크: 86816005
   - EthTxType 하드포크: 86816005
- Baobab 네트워크에 대한 하드포크 블록 번호 설정(#1230)
   - EthTxType 하드포크: 86513895


# 하드포크 관련 주의사항
새로운 버전은 현재 서비스 중인 클레이튼 dApp에도 영향을 미칠 것으로 예상되므로, 서비스 운영자나 개발자분들께서는 아래 안내와 함께 이더리움 동등성을 향한 시리즈 [#1](https://medium.com/klaytn/toward-ethereum-equivalence-1-introducing-klaytn-v1-8-0-971911be7ff9) [#2](https://medium.com/klaytn/toward-ethereum-equivalence-2-changes-in-precompiled-contract-addresses-a314d9db2927) [#3](https://medium.com/klaytn/toward-ethereum-equivalence-3-supporting-ethereum-apis-ab16f66008) [#4](https://medium.com/klaytn/toward-ethereum-equivalence-4-ethereum-transaction-types-a5aefb18e5bf)도 읽어보시길 권장합니다.

## dApp 서비스 제공자의 경우
### 이전 스마트 컨트랙트에서 가스 부족 오류가 발생할 수 있습니다.
IstanbulEVM 하드포크 EVM에는 Opcode에 대한 가스비가 변경되었습니다([Klaytn v1.7.0 릴리스 노트](https://github.com/klaytn/klaytn/releases/tag/v1.7.0)의 "프로토콜 업그레이드 기능"을 참고하세요). 컨트랙트에 폴백처럼 제한된 가스비가 필요한 기능이 많은 경우, 가스비 변경으로 인해 가스 부족이 발생할 수 있습니다. 지금까지 OpenZeppelin의 BaseAdminUpgradeabilityProxy.sol 및 BaseUpgradeabilityProxy.sol을 상속받은 업그레이드 가능한 컨트랙트가 Proxy.sol과 동일한 폴백 기능을 구현하는 경우에 대한 문제를 확인했습니다. 해당 함수가 유사한 방식으로 구현되어 있는지 확인하세요. 또한 가스 비용은 지속적으로 변경될 수 있으므로 로그 출력 이외의 부하가 큰 작업은 폴백에서 사용을 자제해 주시기 바랍니다. ([참고](https://consensys.net/diligence/blog/2019/09/stop-using-soliditys-transfer-now/)).

### 일부 사전 컴파일된 컨트랙트 주소가 변경됩니다.
이더리움의 사전 컴파일된 컨트랙트와의 호환성을 보장하기 위해 vmLog(0x09), feePayer(0x0a), validateSender(0x0b) 주소가 이전될 것입니다. 이는 하드포크 이후에 배포된 컨트랙트에만 적용되며, 그 이전에 배포된 컨트랙트는 계속 사용할 수 있습니다. 자세한 내용은 [이더리움 동등성을 향해 #2 - 사전 컴파일된 컨트랙트 주소의 변경](https://medium.com/klaytn/toward-ethereum-equivalence-2-changes-in-precompiled-contract-addresses-a314d9db2927)을 참고하시기 바랍니다.

### 새로운 트랜잭션 유형을 지원하려면 caver를 v1.8.0 이상으로 업데이트하세요.
`EthTxType` 하드포크를 통해 새로운 트랜잭션 유형을 사용할 수 있습니다. 다른 계정의 트랜잭션에 접근해야 하는 서비스에서 새로운 트랜잭션 형식이 필요한 경우, caver를 v1.8.0([js](https://www.npmjs.com/package/caver-js/v/1.8.0), [java](https://search.maven.org/artifact/com.klaytn.caver/core/1.8.0/jar) 이상 버전으로 업데이트하시기 바랍니다. 새로운 유형에 대한 자세한 내용은 [이더리움 동등성을 향해 #4 - EthereumTransactionType](https://medium.com/klaytn/toward-ethereum-equivalence-4-ethereum-transaction-types-a5aefb18e5bf)을 참고하시기 바랍니다.

## EN 운영자의 경우
### `eth` 및 `klay` API의 새로운 반환 값
이전에는 `eth` 네임스페이스를 사용하여 API를 호출할 수 있었으며, 이는 `klay` 네임스페이스와 동일하게 작동했습니다. 그러나 v1.8.0부터 `eth` 네임스페이스 API는 이더리움 API 반환 형식을 채택합니다. 자세한 내용은 [이더리움 동등성을 향하여 #3 - 이더리움 API 형식 지원](https://medium.com/klaytn/toward-ethereum-equivalence-3-supporting-ethereum-apis-ab16f66008)에서 확인할 수 있습니다. 이전 버전의 동작을 고수하고 `klay`처럼 `eth`를 사용하려면 `--rpc.eth.noncompatible` 초기화 옵션을 추가하면 됩니다.

### EN의 기본 허용 API 목록에 `eth` 추가
EN에 대해 `eth` 네임스페이스 API가 지원되며, 기본 허용 목록에 `eth`가 추가되었습니다. `eth` API를 사용하려면 `kend.conf` 파일의 `RPC_API` 및 `WS_API` 구성에 `eth`를 추가해야 합니다. Hardhat과 같은 이더리움 도구와 함께 사용되는 `net`, `web3` API도 목록에 추가되었습니다. 요약하자면, v1.8.0의 기본 API 화이트리스트에는 다음이 포함됩니다: RPC_API="klay,net,eth,web3", WS_API="klay,net,eth,web3"
