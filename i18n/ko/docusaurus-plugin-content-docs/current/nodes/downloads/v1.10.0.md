# v1.10.0

## 패키지 다운로드

### RPM <a id="rpm"></a>

Cypress 패키지

- [kcnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kcnd-v1.10.0-0.el7.x86_64.rpm)
- [kpnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kpnd-v1.10.0-0.el7.x86_64.rpm)
- [kend-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kend-v1.10.0-0.el7.x86_64.rpm)

Baobab 패키지

- [kcnd-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kcnd-baobab-v1.10.0-0.el7.x86_64.rpm)
- [kpnd-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kpnd-baobab-v1.10.0-0.el7.x86_64.rpm)
- [kend-baobab-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kend-baobab-v1.10.0-0.el7.x86_64.rpm)

공통 패키지

- [kscnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kscnd-v1.10.0-0.el7.x86_64.rpm)
- [kspnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kspnd-v1.10.0-0.el7.x86_64.rpm)
- [ksend-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/ksend-v1.10.0-0.el7.x86_64.rpm)
- [kbnd-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kbnd-v1.10.0-0.el7.x86_64.rpm)
- [kgen-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0.el7.x86_64.rpm)
- [homi-v1.10.0-0.el7.x86_64.rpm](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0.el7.x86_64.rpm)

### Linux <a id="linux"></a>

Cypress 패키지

- [kcn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-v1.10.0-0-linux-amd64.tar.gz)
- [kpn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-v1.10.0-0-linux-amd64.tar.gz)
- [ken-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-v1.10.0-0-linux-amd64.tar.gz)

Baobab 패키지

- [kcn-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-baobab-v1.10.0-0-linux-amd64.tar.gz)
- [kpn-baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-baobab-v1.10.0-0-linux-amd64.tar.gz)
- [ken-baobab-Baobab-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-baobab-v1.10.0-0-linux-amd64.tar.gz)

공통 패키지

- [kscn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kscn-v1.10.0-0-linux-amd64.tar.gz)
- [kspn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kspn-v1.10.0-0-linux-amd64.tar.gz)
- [ksen-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ksen-v1.10.0-0-linux-amd64.tar.gz)
- [kbn-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kbn-v1.10.0-0-linux-amd64.tar.gz)
- [kgen-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0-linux-amd64.tar.gz)
- [homi-v1.10.0-0-linux-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0-linux-amd64.tar.gz)

### MacOS <a id="macos"></a>

Cypress 패키지

- [kcn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ken-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-v1.10.0-0-darwin-10.10-amd64.tar.gz)

Baobab 패키지

- [kcn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kcn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kpn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kpn-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ken-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ken-baobab-v1.10.0-0-darwin-10.10-amd64.tar.gz)

공통 패키지

- [kscn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kscn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kspn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kspn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [ksen-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/ksen-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kbn-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kbn-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [kgen-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/kgen-v1.10.0-0-darwin-10.10-amd64.tar.gz)
- [homi-v1.10.0-0-darwin-10.10-amd64.tar.gz](https://packages.klaytn.net/klaytn/v1.10.0/homi-v1.10.0-0-darwin-10.10-amd64.tar.gz)

### Windows <a id="windows"></a>

- 아직 지원되지 않음

## 릴리스 노트

Klaytn v1.10.0에는 이전 버전과 호환되지 않는 변경을 초래하는 하드포크 업그레이드가 포함되어 있습니다. 따라서 모든 Baobab/Cypress 노드는 대상 블록 번호 이전에 v1.10.0 이상으로 업그레이드해야 합니다. 하드포크의 이름은 "Kore"입니다. 하드포크에는 온체인 거버넌스 투표 방식 구현([KIP81](https://kips.klaytn.foundation/KIPs/kip-81)), 새로운 GC 보상 구조([KIP82](https://kips.klaytn.foundation/KIPs/kip-82)) 및 EVM 변경 사항이 포함되어 있습니다.

계획된 하드포크 일정은 다음과 같습니다:

- Baobab: `111736800` 10:00 AM (UTC+9) Jan 10
- Cypress: 2023년 3월, 다음 릴리스와 함께 발표 예정

## v1.10.0 업그레이드 및 Kore 하드포크 관련 주의 사항

다음은 클레이튼 생태계 참여자들을 위한 몇 가지 중요한 주의 사항입니다. v1.10.0 업그레이드와 Kore 하드포크를 적용하기 전에 이 내용을 읽어주세요.

- 블록 탐색기(Scope, Finder) 및 거버넌스 분석 도구의 경우
  - Kore 하드포크 이후, 거버넌스 투표는 KIP-81에 따라 스마트 컨트랙트에서 처리될 것입니다. 기존 블록 헤더 투표 메커니즘은 컨트랙트 기반 투표 메커니즘의 대체 수단으로만 사용될 것입니다. 확정된 거버넌스 데이터는 `governance_chainConfigAt(num)` 또는 `klay_chainConfigAt(num)` API에서 조회할 수 있습니다. 투표 데이터 분석에 대한 자세한 문서는 거버넌스 컨트랙트 배포 후 추후 공개될 예정입니다.
  - Kore 하드포크 이후, 블록 보상은 KIP-82에 따라 블록 제안자뿐만 아니라 모든 유효한 스테이커(CN)에게 분배됩니다. 제안자 선정 시 Gini 계수는 무시되므로 제안자 간에 보상을 더 공정하게 분배할 수 있습니다. 소각량을 포함한 보상 분배 내역은 새로운 `klay_getRewards(num)` API를 통해 조회할 수 있습니다.

- 노드 운영자의 경우
  - 모든 노드는 Kore 하드포크 블록 번호 이전에 버전을 v1.10.0으로 업데이트해야 합니다. Cypress 하드포크 블록 번호는 Baobab 네트워크에서 하드포크의 안전성을 확인한 후 다음 Klaytn 버전에서 지정될 예정입니다.
  - v1.10.0 업그레이드 이후에는 기본적으로 NTP 시간 동기화가 필수입니다. 노드가 NTP 서버와 동기화하는 데 어려움이 있다면 노드 설정에 `--ntp.disable` 플래그를 추가하세요.
  - v1.10.0 업그레이드 이후, 노드 운영자는 `rpc.unsafe-debug.disable` 플래그를 사용하여 디버그 API의 일부 기능을 제한할 수 있습니다. 디버그 API는 신뢰할 수 있는 사용자에게 공개되어야 하지만, 일부 API는 악의적인 사용자에게 노출될 경우 심각한 문제를 일으킬 수 있습니다. 제한에 대한 자세한 내용은 [이 PR](https://github.com/klaytn/klaytn/pull/1746)의 "추가 의견" 섹션에서 확인하시기 바랍니다.
  - v1.10.0 업그레이드 이후 새로운 노드 플래그가 도입됩니다: `--snapshot`, `--ntp.disable`, `--ntp.server`, `--rpc.evmtimeout`. 자세한 내용은 아래를 참조하세요.

- dApp 개발자의 경우
  - v1.10.0 업그레이드 이후, 노드 운영자가 특별한 설정을 할 경우 디버그 API의 일부 기능을 제한할 수 있습니다. 제한에 대한 자세한 내용은 [이 PR](https://github.com/klaytn/klaytn/pull/1746)의 "추가 의견" 섹션에서 확인하세요.
  - Kore 하드포크 이후, EIP-4399가 채택됨에 따라 `opDifficulty`가 `opRandom`으로 대체될 예정입니다. 이는 Opcode 0x44가 블록의 난이도 대신 이 블록의 이전 블록해시를 반환한다는 것을 의미합니다.
  - Kore 하드포크 이후 `SLOAD`, `*CALL`, `BALANCE`, `EXT*`, `SELFDESTRUCT`의 가스비는 트랜잭션에서 처음 사용될 때 증가하며, EIP-2929의 채택으로 두 번째 이후에는 감소하게 될 것입니다. 그리고 `ModExp` 사전 컴파일된 컨트랙트의 가스 비용은 EIP-2565의 채택으로 정의될 것입니다.
  - Kore 하드포크 이후, EIP-3529의 도입으로 `SELFDESTRUCT`와 `SSTORE`의 가스 환불이 감소될 예정입니다.
  - Kore 하드포크 이후, 0xEF 바이트부터 시작하는 새로운 컨트랙트는 EIP-3541의 채택으로 배포되지 않을 것입니다.

- 생태계 참여자의 경우
  - v1.10.0 업그레이드 이후, 블록 제안자 선택에서 Gini 계수가 비활성화됩니다. 이는 모든 CN이 균등한 확률로 블록을 생성한다는 것을 의미합니다. 보상은 KIP-82에 따라 다른 방식으로 분배됩니다. 블록 발행량의 일부가 스테이커에게 할당되며, 이는 각 CN의 KLAY 스테이킹 금액에 비례합니다.

## 프로토콜 업그레이드(Kore 하드포크) 특징

Kore 하드포크의 새로운 기능들은 각각의 하드포크 블록 번호에 따라 Baobab과 Cypress 네트워크에 적용될 예정입니다.

- 모든 위원회 구성원이 블록 제안자로 선출될 수 있는 동등한 기회 (#1655)
- KIP-81: 온체인 거버넌스 투표 방식 구현(#1512 #1604 #1614 #1623 #1639 #1640 #1711)
- 컨트랙트 기반 온체인 거버넌스 메커니즘 지원으로 업그레이드
- 블록 헤더 또는 거버넌스 파라미터 컨트랙트에 거버넌스 구성 저장
- KIP-82: Gini 계수 폐지에 따른 새로운 GC 보상 구조(#1631 #1642 #1666 #1692 #1709 #1727 #1729 #1734)
  - 블록 제안 보상을 채굴 보상과 스테이킹 보상으로 분리합니다.
  - 블록 생성 시마다 유효한 스테이커에게 스테이킹 보상과 블록 제안자 보상을 분배합니다.
- 특정 블록의 소각량을 포함한 보상 분배 내역을 반환하는 `klay_getRewards` API 도입
- EIP-2565: ModExp 가스 비용 (#1705)
- EIP-2929: 상태 액세스 Opcode에 대한 가스비 증가 (#1705)
- EIP-3529: 환불 감소(#1705)
- EIP-3541: 0xEF 바이트로 시작하는 새 컨트랙트 코드 거부(#1681)
- EIP-4399: DIFFICULTY opcode 코드를 랜덤으로 대체(#1680)

### 개선 사항

- `client.Client`가 새로운 HTTP 헤더를 설정할 수 있도록 변경 (#1632)
- `--snapshot` 플래그를 도입한 비동기 스냅샷 데이터 생성 기능 추가(#1634)
- NTP와의 시간 동기화 개선 및 NTP 구성 플래그 `--ntp.disable` 및 `--ntp.server` 도입 (#1641 #1651 #1669).
- 고릴라 웹소켓 라이브러리 도입 및 양방향 통신 가능 (#1652)
- 이더리움 호환성을 위해 파생샤 구현 유형 업데이트 및 거버넌스 항목으로 추가 (#1648 #1689 #1693 #1708 #1716).
- RPC 서버의 메모리 사용량 감소 (#1650)
- `klay_getLogs` API에 블록해시 필터 옵션 추가 (#1653)
- debug_setHead API에 허용되는 십진수 블록 번호 (#1697)
- 상태 데이터베이스를 확인하기 위한 `snapshot` 하위 명령 추가 (#1701)
- 거버넌스 기능 업그레이드를 지원하기 위해 `governance_chainConfigAt` API 도입 및 `governance_chainConfig` 개선 (#1704 #1724)
- 비정상적인 API로부터 노드를 보호하기 위해 상대적으로 취약한 디버그 API의 기능을 제한할 수 있는 `rpc.unsafe-debug.disable` 플래그를 도입했습니다 (#GHSA-4vx6-m7jv-g2ch #1722 1746).
- `klay` 네임스페이스뿐만 아니라 `governance` 네임스페이스에서도 `getStakingInfo`, `nodeAddress`, `chainConfig`, `chainConfigAt`, `govParamsAt` API를 지원. (#1731)
- 노드 운영자가 노드 리소스를 관리할 수 있도록 EVM 실행 시간 제한 플래그 `--rpc.evmtimeout`을 도입했습니다 (#1736).

### 수정

- ERC721 전송 중 서비스체인 브리지 오퍼레이터의 의도치 않은 가스 소진 완화 (#1445)
- 가중치가 없는 랜덤 제안자 선택의 nil 접근 문제 수정 (#1600)
- 백업 추가 블록을 통한 강제 프로세스 종료로 인한 드문 데이터베이스 손상 문제 수정 (#1630)
- 처리 후 스토리지 스냅샷 데이터를 데이터베이스로 플러시 (#1635)
- Istanbul 컨센서스 엔진에서 항상 CommittedSeal을 확인하도록 수정 (#1678)
- `debug.traceBlock` API 호출로 인한 `gov.changeSet` 손상 문제 해결 (#1706)
- `klay_getLogs` API에서 적용되지 않은 블록 범위 필터 문제 수정 (#1715)
- eth_getProof API에서 항상 EmptyRootHashOriginal을 사용하도록 수정 (#1726)

### 기타

- Prometheus 메트릭에 클레이튼 바이너리 버전 정보 추가 (#1488)
- chaindatafetcher의 가독성 개선 및 추가 정보 제공 (#1587 #1611)
- 통합 Datadog HTTP tracer(#1594 #1730)
- 파일 이름이 `reward#`인 보상 계정 키 저장소를 생성하도록 Homi 개선 (#1605)
- MagmaHeader 확인을 위한 nil 검사 로직 추가 (#1608)
- 도커파일이 golang에서 TLS 연결을 지원하도록 수정 (#1616)
- "Returning since the addr is not a program account"의 로그 레벨을 디버그 레벨로 낮추었습니다 (#1643).
- P2P 메시징 프로토콜의 크기 제한을 10MB에서 12MB로 증가시켰습니다 (#1658).
- 서비스체인 제네시스에 더 많은 잔액을 할당하도록 Homi 업데이트 (#1683)
- Homi에서 yaml 구성에서 genesis.json, 키 및 기타 생성 (#1661)
- 마이너 업데이트(#1552 #1575 #1598 #1638 #1639 #1640 #1667 #1668 #1685 #1696 #1714 #1717 #1718 #1720 #1723 #1725 #1735)
