# Klaytn 스마트 컨트랙트

Klaytn 스마트 컨트랙트는 비즈니스 로직, 게임, 라이브러리, 토큰 전송 등 Klaytn 블록체인과 상호 작용하는 모든 유형의 코드를 실행하는 프로그램입니다. 스마트 컨트랙트에 쓰여있는 조건이 충족되면 컨트랙트는 즉시 실행됩니다. 스마트 컨트랙트 내의 조건은 프로그래밍 언어로 쓰여있습니다. 컨트랙트의 데이터는 상태(state)로 저장되어 있습니다.

Klaytn은 Klaytn 네트워크에서 스마트 컨트랙트를 작성하고 실행하는 몇 가지 방법을 제공합니다. 첫째, Klaytn은 솔리디티(solidity)를 지원하고 Remix 또는 Truffle과 같은 이더리움 개발 툴킷과의 상호운용성을 가지고 있습니다. 솔리디티로 작성된 스마트 계약은 기존 솔리디티 컴파일러를 사용하여 컴파일하고 추가 작업없이 Klaytn에서 실행할 수 있습니다. Solidity는 이더리움의 사실상 표준 컨트랙트 프로그래밍 언어이며 활발한 커뮤니티를 가지고 있습니다. 따라서, Klaytn은 개발자에게 가장 친숙한 개발 환경을 제공하여 이더리움 Dapp 개발자들이 쉽게 그들의 작업을 Klaytn으로 마이그레이션 할 수 있도록 솔리디티를 지원합니다.

미래에는 Klaytn은 다양한 프로그래밍 언어로 작성된 스마트 컨트랙트를 수용할 예정입니다. 그래서 더 광범위한 개발자를 지원하고, 그들이 가장 친숙한 개발 환경에서 개발할 수 있도록 만들 예정입니다. 앞으로 Klaytn은 개발자가 흥미로워하는 다양한 프로그래밍 언어를 계속 찾아나갈 것입니다.

## 경제적인 스마트 컨트랙트 실행 비용

스마트 컨트랙트 실행에 수수료를 청구하는 이유 중 한 가지는 잘못되었거나 악의적으로 작성된 컨트랙트가 실행되지 않도록 만들어 제한된 자원을 효율적으로 활용하기 위해서입니다. 즉, 블록체인은 \(1\)개발자들이 효율적으로 코드를 작성하게 만들고, \(2\) 악의적인 공격자가 공격했을 때 얻을 수 있는 경제적 이득을 줄이기 위해서 스마트 컨트랙트를 실행하는 데 소모되는 비용을 고의로 늘립니다. 이에 알맞는 전략을 구사한다면 정상적인 실행에는 비용을 적게 청구하고 악의적인 실행에는 많이 청구해야 합니다. 이더리움의 연산자(opcode) 기반 수수료 모델은 자원 낭비를 방지하는 데 유용하지만, 일부 연산자\(예: state write\)의 높은 가스 가격 때문에 일반적인 스마트 컨트랙트도 실행하기 힘들게 만들 수 있습니다. 이는 블록체인 기술의 대중화를 막습니다. 이 문제를 해결하기 위해서 Klaytn은 \(1\)연산자 당 낮은 단가와 \(2\) 계량 요금 모델을 특징으로 하는 연산자 기반 고정 수수료 모델(opcode-based fixed fee model)을 사용하고자 계획하고 있습니다.

1. 연산자 비용은 플랫폼이 사용할 수 있는 자원의 양과 직접적인 관련이 있습니다. 이더리움의 상태 쓰기(state write) 비용은 많이 듭니다. 상태 변화를 기록하고 전파하기 위해서 필요한 저장 공간과 네트워크 대역폭이 제한적이기 때문입니다. 반대로, 만약 블록체인이 많은 자원(예: CPU 타임, 저장 공간, 네트워크 대역폭)을 가지고 있으면 연산자 당 수수료 단가는 상당히 적어질 수 있고, 연산자별 비용 차이도 줄일 수 있습니다. Klaytn은 각 CN 노드를 수직적인 확장(즉, 하이엔드 하드웨어 사용)하고, 연산을 병렬화(즉, 서비스체인을 통한 논리적 확장)하며, 물리적 클러스터를 수평으로 확장하여 연산자 당 수수료 단가를 낮추는 것을 목표로 합니다.
2. 이더리움의 스마트 컨트랙트 수수료는 연산자들을 실행하기 위한 가스의 합으로 결정됩니다. 이런 전략은 직관적이고 효과적이지만, 최종 비용은 실행된 연산자의 수와 비례하기 때문에 스마트 컨트랙트의 작은 변경도 실행 비용을 크게 증가시킬 수 있습니다. 이 문제를 해결하기 위해 Klaytn은 미리 정해진 연산자의 실행 범위에 대해 실행 비용을 동일한 레벨로 조정하는 계량 요금 모델을 제안합니다. 연산자당 수수료가 저렴해지고 계량 모델이 적용되면 대부분의 짧은 스마트 컨트랙트 실행은 훨씬 저렴하고 안정적인 비용으로 실행될 수 있습니다.

## 작은 가격 변동성

이더리움이 복잡한 가스 기반 수수료 모델을 선택한 이유는 컴퓨팅 자원을 효율적으로 분배하고, ETH와 법정 화폐 간의 직접 매핑을 방지하여 수수료가 암호화폐 가격 변동성에 주는 영향을 최소화하기 위해서 입니다. Klaytn 또한 KLAY의 환율과 스마트 컨트랙트 실행 수수료와의 관계를 분리하기 위해 이더리움의 모델을 일부 수정한 모델을 사용할 것입니다.